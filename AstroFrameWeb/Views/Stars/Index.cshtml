@model AstroFrameWeb.Data.Models.Star
@using System.Security.Claims

@{
    ViewData["Title"] = "Index";
}

@if (!Model.IsPurchased)
{
    <form asp-action="Buy" asp-route-id="@Model.Id" method="post">
        <button type="submit" class="btn btn-success">Buy the Star</button>
    </form>
}
else if (Model.OwnerId == User.FindFirstValue(System.Security.Claims.ClaimTypes.NameIdentifier))
{
    <span class="text-success">Тази звезда вече е твоя</span>
}
else
{
    <p class="text-warning"><strong>This star is already purchased.</strong></p>
}
<style>
    body {
        background-image: url('/images/StarIndexBody.jpg');
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
        position: relative;
        color: white;
    }

        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: -1;
        }

    th, td, h1, h4, a, label, input, select {
        color: #ffffff !important;
    }

    table {
        background-color: rgba(0, 0, 0, 0.5);
    }

    input.form-control {
        background-color: #ffffff !important;
        color: #000000 !important;
        border: 2px solid #00ffff;
        padding: 8px;
        font-size: 16px;
        border-radius: 6px;
    }

    .btn {
        background-color: #00ffff;
        color: black;
        font-weight: bold;
        border-radius: 6px;
        border: none;
    }

    ::placeholder {
        color: #666 !important;
    }
</style>
<h1 class="text-center">@Model.Name</h1>



<form asp-controller="Stars" asp-action="Index" method="get" class="mb-3 text-center">
    <div class="input-group justify-content-center">
        <input type="text" name="searchStr" class="form-control w-50" placeholder="Search stars by name..." value="@ViewBag.SearchStr" />
        <button type="submit" class="btn btn-primary ms-2">Search</button>
    </div>
</form>


<div class="text-center">
    <img src="@Url.Content("~/images/" + Model.ImageUrl)" alt="@Model.Name" class="star-img" />
</div>


<div class="container star-card text-center">
    <p><strong>Description:</strong> @Model.Description</p>
    <p><strong>Price:</strong> @Model.Price $</p>
    <p><strong>Galaxy:</strong> <a href="/Galaxies/Details/@Model.GalaxyId">@Model.Galaxy.Name</a></p>
    <p><strong>Type:</strong> <a href="/StarTypes/Details/@Model.StarTypeId">@Model.StarType.Name</a></p>
</div>


<div class="mt-4 d-flex justify-content-between">
    <a class="btn btn-outline-light ms-4"
       href="@Url.Action("Index", "Stars", new { index = (int)ViewBag.Index - 1, searchStr = ViewBag.SearchStr })">
        ← Previous
    </a>
    <a class="btn btn-outline-light me-4"
       href="@Url.Action("Index", "Stars", new { index = (int)ViewBag.Index + 1, searchStr = ViewBag.SearchStr })">
        Next →
    </a>
</div>
